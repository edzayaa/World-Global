"use client"
import { useRef } from 'react';
import { gsap } from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
import { useGSAP } from "@gsap/react";
import Text from '../shared_components/Text/Text';
import "./styles.css";
import { getPrevSection, getVerticalOffset } from '@/app/utils';

gsap.registerPlugin(ScrollTrigger);


const Section2 = () => {
    const containerRef = useRef(null);
    const first = useRef(null);
    const second = useRef(null);

    useGSAP(() => {
        // Obtenemos la sección anterior de forma dinámica.
        // Puedes pasar 'null' o dejarlo vacío para que busque el hermano anterior.
        const prevSection = getPrevSection(undefined, containerRef.current);

        if (!prevSection) return;

        const prevSectionOffset = getVerticalOffset(prevSection) + prevSection.scrollHeight;
        const scrollDistance = 500; 

        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: containerRef.current,
                start: prevSectionOffset + scrollDistance,
                end: `+=${scrollDistance}`,
                scrub: 1,
                once:true
                //pin: true,
            }
        });

        tl.fromTo(".section2 .enter_animation", {
            y: -75, 
            opacity: 0, 
         
        },
        {
            y: 0, 
            opacity: 1, 
            duration: 1,
            stagger:0.25
        });
        tl.fromTo(".section2 .enter_animation_up", {
            y: 75, 
            opacity: 0, 
         
        },
        {
            y: 0, 
            opacity: 1, 
            duration: 1,
            
        },">");
      
    }, { scope: containerRef }); 

    return (
        <section ref={containerRef} className="section section2">
            <div className="innerContainer">
                <Text extraClass='enter_animation' color='yellow' fontWeight='medium' fontSize='XS' >Overview</Text>
                <Text extraClass='enter_animation header_section' variant='h2' color='yellow' fontWeight='regular' fontSize="L">Why this roofing is the best choice</Text>
                <Text extraClass='the_most_realistic enter_animation' color='gray' fontWeight='regular'>The most realistic synthetic roofing,<br/> blending seamlessly with nature.</Text>
                <div  className="three_items enter_animation_up">
                    <div className="item_three_items">
                        <svg width="81" height="80" viewBox="0 0 81 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="40.5" cy="40" r="39.5" stroke="#696B36" strokeOpacity="0.39"/>
                            <circle cx="40.5" cy="40" r="39.5" stroke="#AB8E4C"/>
                            <path d="M54.4397 31.1361C54.4397 30.1667 52.8496 28.4997 52.3708 28.0209C51.2299 26.8623 49.6043 25.5559 48.7826 26.147L48.7413 26.1766C48.6822 26.2239 48.6408 26.2889 48.6053 26.3539C47.7304 27.879 46.6369 29.2622 45.366 30.4799C44.166 31.7745 41.033 33.8198 41.033 33.8198C41.033 33.8198 39.0823 37.0237 37.8114 38.2355C37.4449 38.602 37.0902 38.9389 36.7297 39.2581C38.6035 35.274 37.7937 30.545 34.7139 27.4061C34.4657 27.1638 34.0696 27.1638 33.8213 27.4061C30.9662 30.208 29.9436 34.3873 31.1849 38.1882C29.8076 37.5202 28.2352 37.3902 26.7692 37.8217C26.4382 37.9222 26.2491 38.2769 26.3495 38.6079V38.6138C27.1712 41.1615 29.5475 42.8935 32.2253 42.8994H32.5682C31.8174 43.9635 30.9721 44.9565 30.0441 45.8728C28.8263 47.1437 27.4313 48.2254 25.9062 49.1003C25.8471 49.1299 25.788 49.1653 25.7407 49.2126C25.5811 49.3722 25.4924 49.5909 25.4983 49.8156C25.4983 50.785 27.0884 52.452 27.5673 52.9308C28.5781 53.9416 29.8372 54.9997 30.7061 54.9997C30.9248 55.0056 31.1317 54.9229 31.2854 54.7751C31.3327 54.7278 31.3682 54.6746 31.3977 54.6096C32.2726 53.0845 33.3662 51.6894 34.6371 50.4717C35.843 49.1949 39.0764 47.1023 39.0764 47.1023C39.0764 47.1023 41.0153 44.0403 42.2921 42.8285C43.5039 41.5576 46.7019 39.5596 46.7019 39.5596C46.7019 39.5596 48.6821 36.4503 49.959 35.2326C51.1649 33.9321 52.554 32.8149 54.085 31.9164C54.15 31.875 54.2683 31.7627 54.2683 31.7627L54.3392 31.6622C54.4574 31.5026 54.4456 31.3312 54.4397 31.1361ZM34.0873 28.7539C37.0429 32.2238 37.0429 37.3251 34.0873 40.795C31.1376 37.3251 31.1376 32.2238 34.0873 28.7539ZM29.914 41.0729C28.98 40.5881 28.2293 39.8138 27.7682 38.868C29.8962 38.5429 31.9947 39.6423 32.9405 41.5812C31.906 41.7408 30.842 41.5635 29.914 41.0729ZM33.6971 49.585C32.438 50.7968 31.3326 52.1682 30.4164 53.6579C29.6716 53.2145 28.9918 52.6707 28.4007 52.0441C27.7682 51.453 27.2243 50.7732 26.7869 50.0284C28.2943 49.1358 29.6834 48.054 30.9248 46.8127C31.9888 45.7664 32.9464 44.6255 33.7858 43.396C34.241 44.0403 34.7612 44.6314 35.3345 45.1753C35.8961 45.7546 36.5109 46.2747 37.1729 46.724C35.9257 47.5634 34.7612 48.521 33.6971 49.585ZM41.4113 41.9241C41.4173 41.93 39.0705 44.4363 38.1779 45.8787C37.4567 45.4413 36.7947 44.9092 36.2213 44.2886C35.6006 43.6915 35.0745 43.0177 34.643 42.2728C36.0794 41.3743 37.3976 40.3103 38.5799 39.0926C39.6084 38.0818 40.5424 36.9764 41.3641 35.7882C41.8133 36.4444 42.3335 37.0532 42.901 37.603C43.4566 38.1764 44.0596 38.6906 44.7157 39.1399C43.5276 39.9616 42.4222 40.8955 41.4113 41.9241ZM49.0781 34.2809C49.0722 34.275 46.6723 36.8404 45.7679 38.3241C45.0349 37.8926 44.3669 37.3488 43.7876 36.7222C43.1492 36.1252 42.6054 35.4395 42.1738 34.6769C43.6576 33.7725 45.0171 32.6848 46.223 31.4376C47.4821 30.2199 48.5816 28.8425 49.4919 27.3411C50.2486 27.7726 50.9402 28.3164 51.5372 28.9549C52.1756 29.5519 52.7195 30.2376 53.151 31.0001C51.6555 31.9164 50.2899 33.0159 49.0781 34.2809Z" fill="#AB8E4C"/>
                        </svg>
                        <Text fontSize='XS' >Realistic Aesthetic</Text>
                    </div>
                    <div className="tiny_bar"></div>
                    <div className="item_three_items">
                        <svg width="81" height="80" viewBox="0 0 81 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="40.5" cy="40" r="39.5" stroke="#696B36" strokeOpacity="0.39"/>
                            <circle cx="40.5" cy="40" r="39.5" stroke="#AB8E4C"/>
                            <g clipPath="url(#clip0_223_3934)">
                            <path d="M59.4348 43.9096C58.9709 42.7189 57.0245 41.586 54.7036 41.155C53.0332 40.8435 48.7922 40.5117 45.5132 44.1067C43.3079 46.5249 42.7836 49.7185 44.2384 51.8725C44.2584 51.9021 44.2833 51.9277 44.3039 51.9569C41.5423 53.3193 38.3309 53.6649 35.2935 52.8436C36.8773 51.7027 37.3499 50.5303 37.4439 49.679C37.5878 48.3766 36.9333 47.3226 36.3287 46.8153C35.6132 46.2148 34.6893 46.1503 33.9474 46.0991C33.1608 46.0452 32.7738 45.99 32.6272 45.718C32.4978 45.4801 32.5247 45.3763 32.7317 44.9071C33.0044 44.2894 33.4164 43.3563 32.8973 41.7542C32.6969 41.1353 32.8828 40.8534 33.191 40.3862C33.5038 39.9124 33.9329 39.2638 33.7272 38.2702C33.6208 37.7551 33.2738 37.0513 32.2284 36.6242C30.6942 35.9967 28.3087 36.2493 26.2961 37.147C26.6105 35.9973 27.0866 34.8845 27.7259 33.8392C30.238 29.7172 34.7287 27.5239 39.2417 27.7285C39.0525 28.5449 39.4018 29.3893 39.6807 30.0629C39.8995 30.5932 40.1268 31.1412 40.0552 31.5204C39.9849 31.8903 39.565 32.2044 39.1202 32.5369C38.5011 33.0009 37.7304 33.5771 37.7179 34.5753C37.7113 35.0911 37.8638 35.5104 38.17 35.8218C38.7528 36.4132 39.7043 36.4152 40.6243 36.4172C41.1349 36.4185 41.6625 36.4198 42.0923 36.519C42.4944 36.6071 42.7731 36.9679 43.0977 37.3851C43.4775 37.874 43.9085 38.428 44.6366 38.5318C44.7759 38.5515 44.9074 38.5607 45.0309 38.5607C46.1335 38.5607 46.6382 37.8214 47.0509 37.2149C47.2887 36.8653 47.5358 36.5039 47.9077 36.22C47.9077 36.2194 47.9077 36.2194 47.9077 36.2194C48.1785 36.0117 48.6792 35.9073 49.1628 35.8061C49.5716 35.7205 50.0079 35.626 50.3928 35.4514C50.8296 36.4697 51.1398 37.5502 51.3022 38.6737C51.3568 39.0401 51.6959 39.2971 52.0624 39.2424C52.4288 39.1877 52.6858 38.8487 52.6311 38.4823C52.0295 34.2986 49.6123 30.6344 46.0083 28.436C39.3472 24.3726 30.6353 26.4836 26.5719 33.1392C24.6086 36.3604 24.0125 40.1557 24.9039 43.8253C25.7899 47.4949 28.054 50.6013 31.2752 52.5701C33.5721 53.9646 36.1096 54.6318 38.6199 54.6318C40.921 54.6318 43.1973 54.0667 45.2349 52.9958C46.3534 53.9717 47.8347 54.5377 49.3297 54.5377C49.5912 54.5377 49.8528 54.5206 50.113 54.4851C51.6927 54.2696 54.5866 53.1828 56.2228 48.3083C56.9654 46.0978 58.0995 45.4867 58.7093 45.1594C59.0353 44.9846 59.7121 44.6193 59.4348 43.9096ZM48.8868 34.4886C48.2862 34.6147 47.6041 34.7573 47.0903 35.1503C46.5462 35.5662 46.2098 36.0604 45.939 36.4573C45.4961 37.1085 45.3581 37.2773 44.8259 37.1991C44.6366 37.1722 44.3948 36.8607 44.1609 36.5591C43.7587 36.042 43.258 35.3974 42.388 35.2061C41.8176 35.0747 41.2124 35.0734 40.6276 35.0714C40.0743 35.0701 39.3173 35.0688 39.1287 34.8776C39.0729 34.8204 39.0624 34.6909 39.0637 34.5924C39.0676 34.2796 39.3922 34.0148 39.9264 33.6146C40.4988 33.1868 41.2104 32.6546 41.3773 31.7701C41.5232 30.9973 41.2045 30.2272 40.9239 29.5484C40.5726 28.6996 40.4227 28.2351 40.6238 27.8676C42.2363 28.1185 43.8261 28.6823 45.3028 29.5844C47.2059 30.7448 48.7393 32.3569 49.7987 34.2476C49.5518 34.3493 49.1954 34.4245 48.8868 34.4886ZM25.97 38.8176C27.9144 37.6289 30.466 37.3556 31.7191 37.8701C32.1186 38.033 32.3506 38.2591 32.4091 38.5423C32.4978 38.9694 32.3611 39.2014 32.068 39.6449C31.7093 40.189 31.2171 40.9342 31.6173 42.1696C31.978 43.2827 31.746 43.8071 31.5009 44.363C31.2729 44.8795 30.9897 45.5208 31.4431 46.3593C31.9583 47.3108 33.0103 47.3831 33.8547 47.4422C34.4868 47.4856 35.0835 47.5263 35.464 47.8457C35.7452 48.0823 36.198 48.7039 36.1066 49.5319C35.9989 50.5068 35.1568 51.454 33.6652 52.2819C33.0915 52.0393 32.5279 51.7554 31.9807 51.4216C29.0603 49.6388 27.0149 46.8332 26.211 43.5082C25.8417 41.983 25.7585 40.4342 25.9458 38.9221C25.9553 38.8872 25.9602 38.8525 25.97 38.8176ZM54.948 47.8799C53.9059 50.9814 52.1251 52.8529 49.933 53.1512C48.6052 53.3297 47.2017 52.8838 46.1812 52.0281C47.3899 49.6638 48.8805 47.8292 50.6242 46.5867C50.9265 46.3711 50.9975 45.9506 50.7819 45.6483C50.5664 45.346 50.1458 45.2764 49.8436 45.4906C48.0445 46.7727 46.4989 48.5982 45.2365 50.9244C44.3089 49.3055 44.8185 46.8647 46.5068 45.0135C48.5188 42.8083 50.9633 42.3207 52.727 42.3207C53.4393 42.3207 54.0412 42.4009 54.4578 42.4784C56.1571 42.7938 57.4096 43.4969 57.9353 44.0476C57.1783 44.4629 55.8049 45.3263 54.948 47.8799Z" fill="#AB8E4C"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_223_3934">
                            <rect width="35" height="35" fill="white" transform="translate(24.5 23)"/>
                            </clipPath>
                            </defs>
                        </svg>
                        <Text fontSize='XS' >Built to Last</Text>
                    </div>
                    <div className="tiny_bar"></div>
                    <div className="item_three_items">
                        <svg width="81" height="80" viewBox="0 0 81 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="40.5" cy="40" r="39.5" stroke="#696B36" strokeOpacity="0.39"/>
                            <circle cx="40.5" cy="40" r="39.5" stroke="#AB8E4C"/>
                            <path d="M53.0769 26.038C53.0795 25.7107 52.8163 25.4433 52.489 25.4407C52.4036 25.44 52.3191 25.4578 52.2413 25.4928C48.5085 27.23 44.1147 26.7092 40.8916 24.1474C40.6678 23.9509 40.333 23.9509 40.1093 24.1474C36.8726 26.6764 32.4978 27.195 28.7596 25.4928C28.461 25.3585 28.1102 25.4918 27.976 25.7903C27.941 25.8682 27.9232 25.9526 27.9239 26.038C27.9239 26.1625 27.9654 38.3834 27.9239 42.4313C27.9002 44.5946 32.9498 51.6178 40.1982 55.9206C40.3815 56.0264 40.6075 56.0264 40.7908 55.9206C48.0511 51.6178 53.1006 44.5946 53.0769 42.4313C53.0354 38.3834 53.0769 26.1625 53.0769 26.038ZM51.8916 42.4373C51.8916 43.7411 47.7429 50.2902 40.5004 54.7174C33.2343 50.2961 29.0974 43.7471 29.1093 42.4432C29.1448 39.0235 29.1211 29.8193 29.1093 26.9152C32.9325 28.3142 37.2009 27.7234 40.5004 25.3387C43.8 27.7234 48.0683 28.3142 51.8916 26.9152C51.8916 29.8134 51.8619 39.0235 51.8916 42.4373Z" fill="#AB8E4C"/>
                            <path d="M49.9829 29.6419C49.9855 29.3146 49.7223 29.0472 49.395 29.0446C49.3097 29.0439 49.2251 29.0617 49.1473 29.0967C46.438 30.3704 43.2414 30.0032 40.8914 28.1484C40.6676 27.9518 40.3328 27.9518 40.109 28.1484C37.7585 29.9817 34.5836 30.3563 31.8709 29.1204C31.5723 28.9861 31.2215 29.1194 31.0873 29.4179C31.0523 29.4958 31.0346 29.5803 31.0352 29.6656C31.0352 29.7545 31.0649 38.8046 31.0352 41.8036C31.0174 43.4334 34.7868 48.7082 40.1979 51.9205C40.3813 52.0263 40.6072 52.0263 40.7906 51.9205C46.2136 48.7082 49.9829 43.4334 49.9829 41.7798C49.9533 38.7809 49.9829 29.7367 49.9829 29.6419ZM48.7976 41.7798C48.7976 42.6155 45.8342 47.4339 40.5002 50.6699C35.2076 47.4162 32.2028 42.5977 32.2028 41.7798C32.2443 39.3617 32.2028 32.8898 32.2028 30.5191C34.9963 31.5016 38.0935 31.0591 40.5002 29.3337C42.9069 31.0591 46.004 31.5016 48.7976 30.5191V41.7798Z" fill="#AB8E4C"/>
                        </svg>
                        <Text fontSize='XS' >Fire & Wind Resistant</Text>
                    </div>                    
                </div>
            </div>
            <div className="box_shadow"></div>
        </section>
    );
};

export default Section2;